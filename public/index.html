<!DOCTYPE html>
<html lang="en" class="transition duration-300">

<head>
  <meta charset="UTF-8" />
  <title>StoryVid AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Dark Mode - Initialize IMMEDIATELY (prevents flash) -->
  <script>
    (function () {
      if (localStorage.getItem('darkMode') === 'true') {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#eff6ff',
              100: '#dbeafe',
              200: '#bfdbfe',
              300: '#93c5fd',
              400: '#60a5fa',
              500: '#3b82f6',
              600: '#2563eb',
              700: '#1d4ed8',
              800: '#1e40af',
              900: '#1e3a8a'
            }
          }
        }
      }
    }
  </script>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="base.css">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="animations.css">
  <!-- <link rel="stylesheet" href="dashboard.css"> -->
  <link rel="stylesheet" href="hero-fix.css">
</head>

<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen transition-colors duration-300">
  <header
    class="w-full bg-white dark:bg-gray-800 py-4 px-6 flex justify-between items-center sticky top-0 z-50 bg-opacity-90 dark:bg-opacity-90 border-b border-gray-200 dark:border-gray-700 transition-colors duration-300 animate-on-load backdrop-blur-sm">
    <a href="#" onclick="location.reload()" class="flex items-center gap-2 hover:opacity-80 transition group">
      <span class="text-2xl group-hover:scale-110 transition-transform">ðŸ“˜</span>
      <span class="font-heading font-bold text-xl text-gray-900 dark:text-white">StoryVid AI</span>
    </a>

    <div class="flex items-center gap-6 text-sm">
      <button onclick="toggleDarkMode()" id="darkIcon"
        class="w-9 h-9 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors border border-gray-300 dark:border-gray-600">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700 dark:text-yellow-300" fill="none"
          viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
      </button>

      <a href="price.html"
        class="text-gray-900 dark:text-white hover:text-[#5B7FFF] dark:hover:text-[#7B9EFF] font-medium transition-colors">Pricing</a>

      <!-- Library Button -->
      <button onclick="openVideoLibrary()"
        class="text-gray-900 dark:text-white hover:text-[#5B7FFF] dark:hover:text-[#7B9EFF] font-medium transition-colors flex items-center gap-2 group">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
          </path>
        </svg>
        Library
        <span id="libraryCount"
          class="hidden ml-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-[#5B7FFF] text-white">0</span>
      </button>

      <!-- Features Dropdown -->
      <div class="relative group">
        <button id="featuresBtn"
          class="text-gray-900 dark:text-white hover:text-[#5B7FFF] dark:hover:text-[#7B9EFF] font-medium transition-colors flex items-center gap-1">
          Features
          <svg class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="featuresDropdown"
          class="absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-lg z-50 hidden overflow-hidden border border-gray-200 dark:border-gray-700">
          <a href="#youtube-automation"
            class="flex items-center px-4 py-3 hover:bg-[#5B7FFF]/10 dark:hover:bg-[#5B7FFF]/20 transition-colors group/item">
            <svg class="w-5 h-5 mr-3 text-[#5B7FFF]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="font-medium text-gray-900 dark:text-white group-hover/item:text-[#5B7FFF]">YouTube
              Automation</span>
          </a>
          <a href="#thumbnail-generator"
            class="flex items-center px-4 py-3 hover:bg-[#5B7FFF]/10 dark:hover:bg-[#5B7FFF]/20 transition-colors group/item">
            <svg class="w-5 h-5 mr-3 text-[#5B7FFF]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <span class="font-medium text-gray-900 dark:text-white group-hover/item:text-[#5B7FFF]">Thumbnail
              Generator</span>
          </a>
          <a href="#audio-to-image"
            class="flex items-center px-4 py-3 hover:bg-[#5B7FFF]/10 dark:hover:bg-[#5B7FFF]/20 transition-colors group/item">
            <svg class="w-5 h-5 mr-3 text-[#5B7FFF]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
            </svg>
            <span class="font-medium text-gray-900 dark:text-white group-hover/item:text-[#5B7FFF]">Audio to
              Image</span>
          </a>
        </div>
      </div>

      <div class="relative group">
        <button id="profileBtn"
          class="w-9 h-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center hover:shadow-md transition-all hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-900 dark:text-white" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
        </button>
        <div id="profileDropdown"
          class="absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-card z-50 hidden overflow-hidden border border-gray-200 dark:border-gray-700">
          <a href="User data.html"
            class="flex items-center px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-[#5B7FFF]" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
            </svg>
            <span class="font-medium text-gray-900 dark:text-white">User Usage</span>
          </a>
          <a href="Login.html.html" onclick="logout()"
            class="flex items-center px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-red-500" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
            </svg>
            <span class="font-medium text-gray-900 dark:text-white">Logout</span>
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section
    class="hero-section relative overflow-hidden bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-400 min-h-[600px] flex items-center py-20">
    <div class="container mx-auto px-4 py-16 md:py-24 relative z-10">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-8">
          <h1
            class="font-['Poppins'] text-5xl md:text-6xl font-extrabold leading-tight text-white drop-shadow-2xl tracking-tight animate-slide-up-delay-1">
            Create AI-Powered Videos in Minutes
          </h1>
          <p class="animate-slide-up-delay-2 mt-6 text-xl md:text-2xl text-white max-w-3xl mx-auto font-medium">
            From idea to YouTube-ready video with AI script, images, and voice
          </p>
        </div>

        <!-- Credits and CTA Bar -->
        <div
          class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 md:p-8 mt-12 shadow-2xl animate-on-load-delay-3">
          <div class="flex flex-col sm:flex-row items-center justify-between gap-6">
            <div class="flex items-center gap-6 flex-wrap justify-center">
              <div class="flex items-center gap-3">
                <span class="text-white/90 font-medium text-base">Credits Balance:</span>
                <span id="creditBalance" class="text-2xl font-bold text-white font-['Poppins']">198</span>
              </div>
              <span class="text-white/50 text-2xl hidden sm:block">|</span>
              <div class="flex items-center gap-3">
                <span class="text-white/90 font-medium text-base">Estimated Cost:</span>
                <span class="text-2xl font-bold text-white font-['Poppins']" id="estimate">0</span>
              </div>
            </div>

            <button
              onclick="document.getElementById('quick-start-section').scrollIntoView({ behavior: 'smooth', block: 'start' })"
              class="bg-white text-indigo-600 px-8 py-4 rounded-xl font-semibold text-lg shadow-2xl hover:shadow-3xl hover:scale-105 hover:-translate-y-1 transition-all duration-300 flex items-center gap-2 animate-scale-up-delay-1">
              <span>Start Creating</span>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content Section -->
  <section id="quick-start-section"
    class="bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-950 py-24 -mt-8 relative z-10">
    <div class="container mx-auto px-4 max-w-7xl">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16">

        <!-- Left Side: Create Your Video -->
        <div class="create-video-section">
          <h2 class="section-title-left mb-8 animate-on-load">Create Your Video</h2>

          <!-- Workflow Steps Indicator -->
          <div class="workflow-steps mb-6 animate-on-load-delay-1">
            <div class="flex items-center justify-between">
              <div class="workflow-step">
                <div class="step-number">1</div>
                <div class="step-label">Enter Title</div>
              </div>
              <div class="workflow-connector"></div>
              <div class="workflow-step">
                <div class="step-number">2</div>
                <div class="step-label">Generate Script</div>
              </div>
              <div class="workflow-connector"></div>
              <div class="workflow-step">
                <div class="step-number">3</div>
                <div class="step-label">Add Media</div>
              </div>
              <div class="workflow-connector"></div>
              <div class="workflow-step">
                <div class="step-number">4</div>
                <div class="step-label">Render Video</div>
              </div>
            </div>
          </div>

          <p class="helper-text-left text-gray-600 dark:text-gray-400 mb-6 animate-on-load-delay-2">
            Enter a video title to get started
          </p>


          <div
            class="bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl border-2 border-indigo-500/20 dark:border-indigo-400/30 shadow-2xl shadow-indigo-500/10 rounded-3xl p-8 mt-6 hover:shadow-indigo-500/20 hover:-translate-y-1 transition-all duration-300 animate-scale-up-delay-1">
            <div class="input-container">
              <div>
                <button id="titleHelperBtn"
                  class="p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                  <!-- sliders icon -->
                  <svg class="w-6 h-6 text-gray-800 dark:text-gray-200" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor">
                    <path d="M4 21h16M4 14h16M4 7h16" stroke-width="2" stroke-linecap="round" />
                    <circle cx="9" cy="7" r="1.5" fill="currentColor" />
                    <circle cx="15" cy="14" r="1.5" fill="currentColor" />
                    <circle cx="9" cy="21" r="1.5" fill="currentColor" />
                  </svg>
                </button>

                <div id="titleMenu" class="absolute mt-[150px] ml-[-90px] w-[260px]
            bg-white dark:bg-gray-800
            border border-gray-200 dark:border-gray-700
            rounded-md shadow-xl p-1 hidden z-30">
                  <button id="openChannelModal" class="w-full text-left px-3 py-2 whitespace-nowrap
                 text-gray-900 dark:text-gray-100
                 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors">
                    Generate title by channel URL
                  </button>
                  <button id="openSamplesModal" class="w-full text-left px-3 py-2 whitespace-nowrap
                 text-gray-900 dark:text-gray-100
                 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors">
                    Generate title by sample list
                  </button>
                </div>


                <div class="dropdown">

                  <!-- Style modal trigger -->
                  <svg id="fi_7249490" class="icon-svg cursor-pointer text-gray-800 dark:text-gray-200"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="27" height="27" stroke="currentColor"
                    stroke-width="1" fill="none" stroke-linejoin="round" stroke-linecap="round"
                    onclick="openStyleModal()" style="cursor: pointer;">
                    <g stroke="currentColor" stroke-width="1" fill="none">
                      <path d="m3 6h18v5h2v-5c0-1.1-.9-2-2-2h-18c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9v-2h-9z" />
                      <path d="m15 12-6-4v8z" />
                      <path
                        d="m22.7102 18.43c.03-.29.04-.58.01-.86l1.07-.85c.1-.08.12-.21.06-.32l-1.03-1.79c-.06-.11-.19-.15-.31-.11l-1.28.5c-.23-.17-.48-.31-.75-.42l-.2-1.36c-.02-.13-.12-.22-.25-.22h-2.07c-.12 0-.23.09-.25.21l-.2 1.36c-.26.11-.51.26-.74.42l-1.28-.5c-.12-.05-.25 0-.31.11l-1.03 1.79c-.06.11-.04.24.06.32l1.07.86c-.03.29-.04.58-.01.86l-1.07.85c-.1.08-.12.21-.06.32l1.03 1.79c.06.11.19.15.31.11l1.27-.5c.23.17.48.31.75.42l.2 1.36c.02.12.12.21.25.21h2.07c.12 0 .23-.09.25-.21l.2-1.36c.26-.11.51-.26.74-.42l1.28.5c.12.05.25 0 .31-.11l1.03-1.79c.06-.11.04-.24-.06-.32zm-3.71 1.07c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" />
                    </g>
                  </svg>

                  <div id="searchMenu" class="dropdown-menu">
                    <button id="toggleSearch">Web Search</button>
                  </div>
                </div>
              </div>

              <div class="input-wrapper">
                <input id="video-title" type="text" placeholder="Type your video title here..." maxlength="100" />
              </div>

              <div>


                <!-- Context icon -->
                <svg id="icon" class="icon-svg text-gray-800 dark:text-gray-200" xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linejoin="round"
                  stroke-linecap="round" style="width: 24px; height: 24px; cursor: pointer;"
                  onclick="showContextModal()">
                  <path d="M12 20h9"></path>
                  <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                </svg>

                <!-- Upload text file icon -->
                <input type="file" id="txtFileInput" accept=".txt" style="display: none;" />
                <svg id="uploadTxtIcon" class="text-gray-800 dark:text-gray-200" xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linejoin="round"
                  stroke-linecap="round" style="width: 24px; height: 24px; cursor: pointer; margin-right: 8px;"
                  onclick="document.getElementById('txtFileInput').click()">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="17 8 12 3 7 8"></polyline>
                  <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>

                <!-- Word count icon -->
                <svg id="wordCountIcon" class="text-gray-800 dark:text-gray-200" xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linejoin="round"
                  stroke-linecap="round" style="width: 28px; height: 28px; cursor: pointer;"
                  onclick="handleIconClick()">
                  <rect x="2" y="8" width="20" height="8" rx="1" ry="1"></rect>
                  <line x1="4" y1="8" x2="4" y2="16" stroke-width="1"></line>
                  <line x1="6" y1="10" x2="6" y2="14" stroke-width="1"></line>
                  <line x1="8" y1="8" x2="8" y2="16" stroke-width="1"></line>
                  <line x1="10" y1="10" x2="10" y2="14" stroke-width="1"></line>
                  <line x1="12" y1="8" x2="12" y2="16" stroke-width="1"></line>
                  <line x1="14" y1="10" x2="14" y2="14" stroke-width="1"></line>
                  <line x1="16" y1="8" x2="16" y2="16" stroke-width="1"></line>
                  <line x1="18" y1="10" x2="18" y2="14" stroke-width="1"></line>
                  <line x1="20" y1="8" x2="20" y2="16" stroke-width="1"></line>
                </svg>

                <span id="count-text" class="text-gray-900 dark:text-gray-100"
                  style="user-select: none; font-weight: bold; cursor: pointer;">500</span>
              </div>

              <input type="hidden" id="mainWordCount" value="500" />
              <input type="hidden" id="additionalContextHidden" value="" />

              <button id="generate-btn" class="generate-btn disabled:opacity-50 disabled:cursor-not-allowed"
                onclick="generateFullScript()" disabled>
                Generate
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Side: How It Works -->
      <div class="how-it-works-sidebar">
        <h2 class="section-title-left mb-8 animate-on-load">How StoryVid AI Works</h2>

        <div class="workflow-cards-vertical space-y-4">
          <!-- Step 1 -->
          <div class="workflow-card-vertical animate-on-load-delay-1">
            <div class="card-icon-wrapper">
              <div class="step-badge step-badge-1">1</div>
              <div class="step-icon step-icon-1">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
              </div>
            </div>
            <div class="card-content">
              <h3 class="step-title">Enter Title</h3>
              <p class="step-description">Simply type your video idea or title. Our AI will understand your concept and
                create a compelling script.</p>
            </div>
          </div>

          <!-- Step 2 -->
          <div class="workflow-card-vertical animate-on-load-delay-2">
            <div class="card-icon-wrapper">
              <div class="step-badge step-badge-2">2</div>
              <div class="step-icon step-icon-2">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
            </div>
            <div class="card-content">
              <h3 class="step-title">AI Generates Script</h3>
              <p class="step-description">Our advanced AI creates an engaging, retention-optimized script tailored to
                your title and style preferences.</p>
            </div>
          </div>

          <!-- Step 3 -->
          <div class="workflow-card-vertical animate-on-load-delay-3">
            <div class="card-icon-wrapper">
              <div class="step-badge step-badge-3">3</div>
              <div class="step-icon step-icon-3">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
              </div>
            </div>
            <div class="card-content">
              <h3 class="step-title">Add Media</h3>
              <p class="step-description">Generate AI images for each scene and add professional voice narration.
                Customize styles and voices to match your brand.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </section>

  <!-- Script Output Section -->
  <section class="script-output-section py-8">
    <div class="container mx-auto px-4 max-w-7xl">
      <div id="scriptWrapper" class="hidden">
        <hr class="border-t border-gray-300 dark:border-gray-600 my-6 mx-auto" style="max-width: 100%;" />

        <div id="scriptOutput"
          class="mx-auto mt-0 w-full max-w-3xl bg-white dark:bg-gray-800 border-2 border-[#5B7FFF]/20 dark:border-[#5B7FFF]/30 rounded-2xl shadow-lg p-6 transition-colors duration-300">
          <div style="margin-top:-16px;" class="flex items-center justify-between mb-4">
            <div class="flex items-center space-x-2">
              <h2 class="text-xl font-semibold text-[#5B7FFF]">Script</h2>

              <svg id="voiceIcon" role="button" aria-disabled="true" tabindex="0"
                class="w-6 h-6 cursor-pointer hover:opacity-75 text-gray-600 dark:text-gray-300 vo-icon disabled transition-opacity"
                viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"
                onclick="handleVoiceIconClickDirect(event)" style="pointer-events: auto;">
                <path fill="none" d="M0 0h24v24H0z"></path>
                <path
                  d="M1 22a8 8 0 1 1 16 0H1zm8-9c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm9.246-9.816A9.97 9.97 0 0 1 19 7a9.97 9.97 0 0 1-.754 3.816l-1.677-1.22A7.99 7.99 0 0 0 17 7a7.99 7.99 0 0 0-.43-2.596l1.676-1.22zm3.302-2.4A13.942 13.942 0 0 1 23 7c0 2.233-.523 4.344-1.452 6.216l-1.645-1.196A11.955 11.955 0 0 0 21 7c0-1.792-.393-3.493-1.097-5.02L21.548.784z" />
              </svg>

              <svg id="imageIcon"
                class="w-6 h-6 cursor-pointer hover:opacity-75 stroke-gray-600 dark:stroke-gray-300 vo-icon disabled transition-opacity"
                role="button" aria-disabled="true" tabindex="0" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                onclick="handleImageIconClickDirect(event)" style="pointer-events: auto;">
                <path d="M21 11v8a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h8" />
                <circle cx="8.5" cy="8.5" r="1.5" />
                <path d="M21 15l-5-5L5 21" />
                <path d="M19 2v6" />
                <path d="M22 5h-6" />
              </svg>

              <span id="voiceEstWrap" class="ml-2 text-xs text-gray-600 dark:text-gray-400 font-bold hidden">
                Estimated Voice Credit: <span id="voiceCredVal"
                  class="font-bold text-gray-900 dark:text-gray-100">0</span>
              </span>

              </span>
              <span id="voiceProgress"
                class="ml-2 text-sm font-semibold text-gray-600 dark:text-gray-400 hidden">0%</span>

              <div id="audioContainer"
                class="hidden inline-flex items-center w-[320px] h-[28px] overflow-hidden shrink-0">
              </div>




            </div>

            <div class="flex items-center space-x-4">
              <button id="copyBtn" aria-label="Copy Script" onclick="copyScript()"
                class="p-1 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition disabled:opacity-40 disabled:cursor-not-allowed disabled:pointer-events-none"
                disabled aria-disabled="true">
                <svg class="w-6 h-6 hover:opacity-75 stroke-gray-600 dark:stroke-gray-300" viewBox="0 0 24 24"
                  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
              </button>

              <button id="downloadBtn" aria-label="Download Script" onclick="downloadScript()"
                class="p-1 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition disabled:opacity-40 disabled:cursor-not-allowed disabled:pointer-events-none"
                disabled aria-disabled="true">
                <svg class="w-6 h-6 hover:opacity-75 stroke-gray-600 dark:stroke-gray-300" viewBox="0 0 24 24"
                  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7,10 12,15 17,10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
              </button>

            </div>
          </div>

          <hr class="border-t border-gray-200 dark:border-gray-700 my-4 -mx-6" />

          <div id="scriptContent" style="max-height: 380px; overflow-y: auto; padding: 20px;"
            class="text-gray-700 dark:text-gray-300 min-h-[380px] whitespace-pre-wrap break-words">
            <div style="padding-top: 20px; padding-bottom: 20px;"></div>
          </div>
        </div>

        <div class="mx-auto w-full max-w-3xl mt-2">
          <span class="text-sm font-bold text-gray-600 dark:text-gray-400">
            Word Count: <span id="wordCount" class="text-gray-900 dark:text-gray-100">0</span>
          </span>
        </div>
      </div>

      <!-- Modals -->
      <div id="modal-overlay"
        class="hidden fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 z-40 transition-opacity duration-300">
      </div>

      <div id="word-count-modal"
        class="hidden fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-900 rounded-xl shadow-xl w-96 p-8 text-gray-900 dark:text-gray-100 font-sans transition-all duration-300 ease-in-out border border-gray-200 dark:border-gray-700">
        <h1 class="text-xl font-semibold mb-6 text-center text-gray-900 dark:text-gray-100">Word Count</h1>
        <p class="text-lg mb-6 text-center text-gray-700 dark:text-gray-300">Enter Your Desired Word Count for Your
          Video (Max: 8000)</p>
        <input type="number" id="word-count-input" min="1" max="8000" placeholder="e.g., 1000"
          class="w-full p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-blue-500 dark:focus:ring-blue-400 transition" />
        <p class="text-sm text-gray-500 dark:text-gray-400 mt-2 text-center">Maximum allowed: 8000 words</p>
      </div>

      <!-- Context Modal Overlay + Window -->
      <div id="context-modal-overlay"
        class="hidden fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 z-40 transition-opacity duration-300">
      </div>

      <div id="context-modal"
        class="hidden fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 
         bg-white dark:bg-gray-800 
         rounded-lg shadow-lg w-96 p-6 
         text-gray-900 dark:text-gray-100 font-sans border border-gray-200 dark:border-gray-700 transition-all duration-300">

        <h2 class="text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100">Additional Context/Instructions</h2>

        <p class="text-gray-600 dark:text-gray-300 font-semibold mb-4 text-sm">
          Add additional information or context for the AI model to understand so it can better craft your desired
          script.
        </p>

        <p class="italic text-gray-500 dark:text-gray-400 mb-3 text-sm">
          Example: "The main character is a retired detective named Marcus. The story should take place in a rainy
          cyberpunk city and follow his last mission to solve a decades-old cold case before leaving the force."
        </p>

        <textarea id="additional-context-input" rows="6" placeholder="Enter any additional context or instructions..."
          class="w-full p-3 border border-gray-300 dark:border-gray-600 
           rounded-md resize-y 
           focus:outline-none focus:ring-2 focus:ring-blue-500 
           bg-white dark:bg-gray-700 
           text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 transition-colors duration-300">
  </textarea>

        <div class="mt-4 flex justify-end space-x-4">
          <button onclick="hideContextModal()" class="px-3 py-2 bg-gray-200 dark:bg-gray-600 
             text-gray-900 dark:text-gray-100 
             rounded hover:bg-gray-300 dark:hover:bg-gray-500 
             transition-colors">
            Cancel
          </button>

          <button onclick="saveAdditionalContext()" class="px-3 py-2 bg-blue-600 dark:bg-blue-700 
             text-white rounded 
             hover:bg-blue-700 dark:hover:bg-blue-800 
             transition-colors">
            Save
          </button>
        </div>
      </div>


      <!-- Shared overlay -->
      <div id="titleOverlay"
        class="fixed inset-0 bg-black/50 dark:bg-black/60 hidden z-40 transition-opacity duration-300"></div>

      <!-- Channel URL modal -->
      <!-- Channel modal -->
      <div id="channelModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 dark:bg-black/60">
        <div class="bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700
              w-[560px] max-w-[92vw] p-6 mx-auto transition-transform transform scale-100">

          <!-- Header -->
          <div class="flex items-center justify-between mb-5">
            <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Enter Channel URL</h3>
            <button class="text-2xl leading-none text-gray-400 hover:text-red-500 focus:outline-none
                     focus:ring-2 focus:ring-red-400/60 dark:focus:ring-red-600/60 rounded-md p-1 transition-colors"
              data-close aria-label="Close modal">&times;</button>
          </div>

          <!-- Input Section -->
          <div class="mb-4">
            <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Channel URL</label>
            <div class="flex items-center gap-2">
              <input id="channelUrl" type="url" placeholder="https://www.youtube.com/@channel" class="flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700
                      bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
                      placeholder:text-gray-400 dark:placeholder:text-gray-500
                      focus:outline-none focus:ring-2 focus:ring-[#5B7FFF] transition-colors duration-300">
              <button id="genFromChannel" class="px-3 py-2 rounded-lg bg-[#5B7FFF] hover:bg-[#4A6BFF]
                       text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                disabled>&rarr;</button>
            </div>
            <p class="text-sm text-gray-500 dark:text-gray-400 mt-2">Estimated credits: <b>5</b></p>
          </div>

          <!-- Results -->
          <div id="channelResults" class="space-y-2 max-h-64 overflow-y-auto hidden">
            <!-- filled with title chips -->
          </div>
        </div>
      </div>


      <!-- Samples modal -->
      <div id="samplesModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 dark:bg-black/60">
        <div class="bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700
              w-[680px] max-w-[95vw] p-6 mx-auto transition-transform transform scale-100">

          <!-- Header -->
          <div class="flex items-center justify-between mb-5">
            <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Generate Titles from Samples</h3>
            <button class="text-2xl leading-none text-gray-400 hover:text-red-500 focus:outline-none
                     focus:ring-2 focus:ring-red-400/60 dark:focus:ring-red-600/60 rounded-md p-1 transition-colors"
              data-close aria-label="Close modal">&times;</button>
          </div>

          <!-- List -->
          <div id="samplesList" class="space-y-3 max-h-64 overflow-y-auto pr-1">
            <div class="flex items-center gap-2">
              <input type="text" placeholder="Sample Title 1" class="flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700
                      bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
                      placeholder:text-gray-400 dark:placeholder:text-gray-500
                      focus:outline-none focus:ring-2 focus:ring-[#5B7FFF] transition-colors duration-300">
              <button class="px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700
                       text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800
                       transition-colors" data-remove title="Remove">âˆ’</button>
            </div>
          </div>

          <!-- Add + Credits -->
          <div class="flex items-center justify-between mt-4">
            <button id="addSample" class="inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700
                     text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
              + Add
            </button>
            <div class="text-sm text-gray-500 dark:text-gray-400">Estimated credits: <b>3</b></div>
          </div>

          <!-- Actions -->
          <div class="flex items-center justify-end gap-3 mt-6">
            <button class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700
                     text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
              data-close>Cancel</button>
            <button id="genFromSamples" class="px-4 py-2 rounded-lg bg-[#5B7FFF] hover:bg-[#4A6BFF]
                     text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              disabled>Generate</button>
          </div>

          <!-- Results -->
          <div id="samplesResults" class="space-y-2 max-h-64 overflow-y-auto mt-4 hidden">
            <!-- filled with title chips -->
          </div>
        </div>
      </div>

      <!-- Image Generation Modal -->
      <div id="imageGenerationModal"
        class="fixed inset-0 z-50 hidden bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 transition-all duration-300">
        <div class="bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-800
              w-full max-w-5xl max-h-[95vh] overflow-hidden mx-auto
              transition-all duration-300 flex flex-col">

          <!-- Enhanced Header with Crayo Blue -->
          <div class="relative px-8 py-6 bg-[#5B7FFF]">
            <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width=\" 20\" height=\"20\"
              xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cpath d=\"M0 0h20v20H0z\" fill=\"none\"/%3E%3Ccircle cx=\"2\"
              cy=\"2\" r=\"1\" fill=\"white\" opacity=\"0.1\"/%3E%3C/svg%3E')]"></div>
            <div class="relative flex items-center justify-between">
              <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center">
                  <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                </div>
                <div>
                  <h2 class="text-2xl font-bold text-white">Generate Images</h2>
                  <p class="text-sm text-blue-100 mt-0.5">AI-powered image generation</p>
                </div>
              </div>
              <button onclick="closeImageModal()" class="w-10 h-10 rounded-xl bg-white/10 hover:bg-white/20 backdrop-blur-md
                       flex items-center justify-center text-white transition-all duration-200
                       hover:rotate-90 transform">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Scrollable Form Content -->
          <div
            class="flex-1 overflow-y-auto p-8 space-y-7 bg-gradient-to-br from-gray-50 to-white dark:from-gray-900 dark:to-gray-900">

            <!-- Row 1: Four Options Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">

              <!-- 1. Aspect Ratio -->
              <div class="space-y-2.5">
                <label class="flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-200">
                  <span
                    class="flex items-center justify-center w-7 h-7 rounded-full bg-[#5B7FFF] text-white text-xs font-bold shadow-lg">1</span>
                  Aspect Ratio
                </label>
                <select id="imageAspectRatio" class="w-full px-4 py-3.5 rounded-xl border-2 border-gray-200 dark:border-gray-700
                         bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
                         focus:outline-none focus:border-[#5B7FFF] focus:ring-4 focus:ring-[#5B7FFF]/10
                         cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 
                         transition-all duration-200 font-semibold">
                  <option value="16:9">16:9 Landscape</option>
                  <option value="9:16">9:16 Portrait</option>
                  <option value="1:1">1:1 Square</option>
                </select>
              </div>

              <!-- 2. Quality -->
              <div class="space-y-2.5">
                <label class="flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-200">
                  <span
                    class="flex items-center justify-center w-7 h-7 rounded-full bg-[#5B7FFF] text-white text-xs font-bold shadow-lg">2</span>
                  Quality Level
                </label>
                <select id="imageQuality" class="w-full px-4 py-3.5 rounded-xl border-2 border-gray-200 dark:border-gray-700
                         bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
                         focus:outline-none focus:border-[#5B7FFF] focus:ring-4 focus:ring-[#5B7FFF]/10
                         cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 
                         transition-all duration-200 font-semibold">
                  <option value="standard" selected>Standard (30 credits)</option>
                  <option value="hd">HD (50 credits)</option>
                  <option value="ultra">Ultra HD (80 credits)</option>
                </select>
              </div>

              <!-- 3. Animate -->
              <div class="space-y-2.5">
                <label class="flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-200">
                  <span
                    class="flex items-center justify-center w-7 h-7 rounded-full bg-[#5B7FFF] text-white text-xs font-bold shadow-lg">3</span>
                  Animation
                </label>
                <div class="flex items-center h-14 px-4 rounded-xl border-2 border-gray-200 dark:border-gray-700 
                      bg-white dark:bg-gray-800 transition-all duration-200
                      hover:border-gray-300 dark:hover:border-gray-600">
                  <label class="flex items-center gap-3 cursor-pointer group w-full">
                    <input type="checkbox" id="imageAnimate" class="w-5 h-5 rounded-lg border-2 border-gray-300 dark:border-gray-600 
                            text-[#5B7FFF] focus:ring-2 focus:ring-[#5B7FFF] focus:ring-offset-2
                            transition-all duration-200 cursor-pointer">
                    <span
                      class="text-sm font-semibold text-gray-700 dark:text-gray-300 group-hover:text-[#5B7FFF] dark:group-hover:text-[#7B9EFF] transition-colors">Animate</span>
                  </label>
                </div>
              </div>

              <!-- 4. Count -->
              <div class="space-y-2.5">
                <label class="flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-200">
                  <span
                    class="flex items-center justify-center w-7 h-7 rounded-full bg-[#5B7FFF] text-white text-xs font-bold shadow-lg">4</span>
                  Image Count
                </label>
                <input type="number" id="imageCount" value="3" min="3" max="250" class="w-full px-4 py-3.5 rounded-xl border-2 border-gray-200 dark:border-gray-700
                        bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
                        focus:outline-none focus:border-[#5B7FFF] focus:ring-4 focus:ring-[#5B7FFF]/10
                        hover:border-gray-300 dark:hover:border-gray-600
                        transition-all duration-200 font-bold text-center text-lg">
                <p class="text-xs text-gray-500 dark:text-gray-400 text-center font-medium">Min: 3, Max: 250</p>
              </div>

            </div>

            <!-- Row 2: Style Selection -->
            <div>
              <label class="block text-sm font-semibold mb-2.5 text-gray-700 dark:text-gray-300">
                5. Choose style
              </label>
              <div class="group border-2 border-gray-300 dark:border-gray-600 rounded-xl p-5 
                    bg-white dark:bg-gray-800 cursor-pointer 
                    hover:border-[#5B7EFF] hover:shadow-md
                    transition-all duration-200" onclick="openStyleSelector()">
                <div class="flex items-center gap-4">
                  <div class="flex-shrink-0">
                    <img id="selectedStyleImage"
                      src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3ClinearGradient id='skin' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0%25' stop-color='%23ffd7b5'/%3E%3Cstop offset='100%25' stop-color='%23e6b89c'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='%23d4a373' width='200' height='200'/%3E%3Cellipse cx='100' cy='80' rx='35' ry='40' fill='url(%23skin)'/%3E%3Crect x='70' y='110' width='60' height='80' fill='%23333' rx='8'/%3E%3Cellipse cx='85' cy='65' rx='5' ry='7' fill='%23654321'/%3E%3Cellipse cx='115' cy='65' rx='5' ry='7' fill='%23654321'/%3E%3Cpath d='M85 90 Q100 95 115 90' stroke='%23654321' stroke-width='2' fill='none'/%3E%3C/svg%3E"
                      alt="Realistic" class="w-20 h-20 rounded-lg object-cover border border-gray-200 dark:border-gray-600
                          shadow-sm group-hover:shadow-md transition-shadow duration-200"
                      onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27100%27 height=%27100%27%3E%3Crect fill=%27%23e5e7eb%27 width=%27100%27 height=%27100%27/%3E%3C/svg%3E'">
                  </div>
                  <div class="flex-1 min-w-0">
                    <h3 id="selectedStyleName" class="font-bold text-base text-gray-900 dark:text-gray-100 mb-1">
                      Realistic
                    </h3>
                    <button type="button" class="text-sm text-[#5B7EFF] hover:text-[#4A6BFF] dark:text-[#7B9EFF] dark:hover:text-[#5B7EFF] 
                             font-medium transition-colors duration-200">
                      Click to change style
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Row 3: Additional Context -->
            <div>
              <label class="block text-sm font-semibold mb-2.5 text-gray-700 dark:text-gray-300">
                6. Additional context (Optional)
              </label>
              <textarea id="imageContext" rows="4"
                placeholder="Provide extra context or information (e.g., 'Keep all images consistent with the historical time period of the Renaissance')"
                class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600
                         bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
                         placeholder:text-gray-400 dark:placeholder:text-gray-500
                         focus:outline-none focus:ring-2 focus:ring-[#5B7EFF] focus:border-[#5B7EFF]
                         hover:border-gray-400 dark:hover:border-gray-500
                         resize-none transition-all duration-200 leading-relaxed"></textarea>
            </div>

          </div>

          <!-- Footer with Actions -->
          <div class="border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-6 py-4">
            <div class="flex items-center justify-between">
              <div class="text-sm text-gray-600 dark:text-gray-400">
                Estimated credits: <span id="imageCreditsEstimate"
                  class="font-bold text-gray-900 dark:text-gray-100 ml-1">180</span>
              </div>
              <div class="flex gap-3">
                <button onclick="closeImageModal()" class="px-6 py-2.5 rounded-xl border border-gray-300 dark:border-gray-600
                         text-gray-700 dark:text-gray-300 font-medium
                         hover:bg-gray-100 dark:hover:bg-gray-800 
                         transition-all duration-200">
                  Cancel
                </button>
                <button id="generateImagesBtn" class="px-6 py-2.5 rounded-xl bg-[#5B7FFF] hover:bg-[#4A6BFF]
                         text-white font-semibold shadow-lg hover:shadow-xl
                         transition-all duration-200 flex items-center gap-2">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                    <polyline points="21 15 16 10 5 21"></polyline>
                  </svg>
                  Generate Images
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Style Selector Modal -->
      <div id="styleSelectorModal"
        class="fixed inset-0 z-[60] hidden bg-black/50 dark:bg-black/70 flex items-center justify-center transition-opacity duration-300">
        <div class="bg-white dark:bg-gray-900 rounded-[24px] shadow-2xl border border-gray-200 dark:border-gray-700
              w-[1100px] max-w-[95vw] max-h-[90vh] overflow-y-auto p-8 mx-auto
              text-gray-900 dark:text-gray-100 transition-all duration-300">

          <!-- Header -->
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100">Choose a Style</h2>
            <button onclick="closeStyleSelector()"
              class="text-2xl text-gray-400 hover:text-red-600 dark:hover:text-red-500 transition-colors">&times;</button>
          </div>

          <!-- Styles Grid - Page 1 -->
          <div id="stylesPage1" class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">

            <!-- Upload Custom -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('upload-custom', 'Upload Custom', undefined, event)">
              <div
                class="aspect-square bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all flex items-center justify-center">
                <svg class="w-16 h-16 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor"
                  viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
                  </path>
                </svg>
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Upload Custom</p>
            </div>

            <!-- Realistic -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('realistic', 'Realistic', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Cdefs%3E%3ClinearGradient id%3D%27skin%27 x1%3D%270%27 y1%3D%270%27 x2%3D%270%27 y2%3D%271%27%3E%3Cstop offset%3D%270%25%27 stop-color%3D%27%23ffd7b5%27%2F%3E%3Cstop offset%3D%27100%25%27 stop-color%3D%27%23e6b89c%27%2F%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Crect fill%3D%27%23d4a373%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Cellipse cx%3D%27100%27 cy%3D%2780%27 rx%3D%2735%27 ry%3D%2740%27 fill%3D%27url%28%23skin%29%27%2F%3E%3Crect x%3D%2770%27 y%3D%27110%27 width%3D%2760%27 height%3D%2780%27 fill%3D%27%23333%27 rx%3D%278%27%2F%3E%3Cellipse cx%3D%2785%27 cy%3D%2765%27 rx%3D%275%27 ry%3D%277%27 fill%3D%27%23654321%27%2F%3E%3Cellipse cx%3D%27115%27 cy%3D%2765%27 rx%3D%275%27 ry%3D%277%27 fill%3D%27%23654321%27%2F%3E%3Cpath d%3D%27M85 90 Q100 95 115 90%27 stroke%3D%27%23654321%27 stroke-width%3D%272%27 fill%3D%27none%27%2F%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3ClinearGradient id='skin' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0%25' stop-color='%23ffd7b5'/%3E%3Cstop offset='100%25' stop-color='%23e6b89c'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='%23d4a373' width='200' height='200'/%3E%3Cellipse cx='100' cy='80' rx='35' ry='40' fill='url(%23skin)'/%3E%3Crect x='70' y='110' width='60' height='80' fill='%23333' rx='8'/%3E%3Cellipse cx='85' cy='65' rx='5' ry='7' fill='%23654321'/%3E%3Cellipse cx='115' cy='65' rx='5' ry='7' fill='%23654321'/%3E%3Cpath d='M85 90 Q100 95 115 90' stroke='%23654321' stroke-width='2' fill='none'/%3E%3C/svg%3E"
                  alt="Realistic" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Realistic</p>
            </div>

            <!-- Oil Painting -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('oil-painting', 'Oil Painting', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Crect fill%3D%27%23c9b895%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Cellipse cx%3D%27100%27 cy%3D%2780%27 rx%3D%2740%27 ry%3D%2745%27 fill%3D%27%23d4a574%27%2F%3E%3Crect x%3D%2765%27 y%3D%27115%27 width%3D%2770%27 height%3D%2775%27 fill%3D%27%23a67c52%27 rx%3D%2712%27%2F%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-yellow-100 dark:bg-yellow-900 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23c9b895' width='200' height='200'/%3E%3Cellipse cx='100' cy='80' rx='40' ry='45' fill='%23d4a574'/%3E%3Crect x='65' y='115' width='70' height='75' fill='%23a67c52' rx='12'/%3E%3C/svg%3E"
                  alt="Oil Painting" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Oil Painting</p>
            </div>

            <!-- 3D Model -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('3d-model', '3D Model', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Cdefs%3E%3ClinearGradient id%3D%27g1%27 x1%3D%270%27 y1%3D%270%27 x2%3D%271%27 y2%3D%271%27%3E%3Cstop offset%3D%270%25%27 stop-color%3D%27%23667788%27%2F%3E%3Cstop offset%3D%27100%25%27 stop-color%3D%27%23445566%27%2F%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Crect fill%3D%27%23556b7c%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Cellipse cx%3D%27100%27 cy%3D%2790%27 rx%3D%2738%27 ry%3D%2742%27 fill%3D%27url%28%23g1%29%27%2F%3E%3Cellipse cx%3D%27100%27 cy%3D%2788%27 rx%3D%2738%27 ry%3D%2742%27 fill%3D%27%23889aa0%27%2F%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-slate-500 dark:bg-slate-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3ClinearGradient id='g1' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0%25' stop-color='%23667788'/%3E%3Cstop offset='100%25' stop-color='%23445566'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='%23556b7c' width='200' height='200'/%3E%3Cellipse cx='100' cy='90' rx='38' ry='42' fill='url(%23g1)'/%3E%3Cellipse cx='100' cy='88' rx='38' ry='42' fill='%23889aa0'/%3E%3C/svg%3E"
                  alt="3D Model" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">3D Model</p>
            </div>

            <!-- Drawing -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('drawing', 'Drawing', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Crect fill%3D%27%2387ceeb%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Ccircle cx%3D%27100%27 cy%3D%27100%27 r%3D%2745%27 fill%3D%27%23ff69b4%27 stroke%3D%27%23000%27 stroke-width%3D%273%27%2F%3E%3Ccircle cx%3D%2788%27 cy%3D%2790%27 r%3D%275%27 fill%3D%27%23000%27%2F%3E%3Ccircle cx%3D%27112%27 cy%3D%2790%27 r%3D%275%27 fill%3D%27%23000%27%2F%3E%3Cpath d%3D%27M85 110 Q100 120 115 110%27 stroke%3D%27%23000%27 stroke-width%3D%273%27 fill%3D%27none%27%2F%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-cyan-100 dark:bg-cyan-900 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%2387ceeb' width='200' height='200'/%3E%3Ccircle cx='100' cy='100' r='45' fill='%23ff69b4' stroke='%23000' stroke-width='3'/%3E%3Ccircle cx='88' cy='90' r='5' fill='%23000'/%3E%3Ccircle cx='112' cy='90' r='5' fill='%23000'/%3E%3Cpath d='M85 110 Q100 120 115 110' stroke='%23000' stroke-width='3' fill='none'/%3E%3C/svg%3E"
                  alt="Drawing" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Drawing</p>
            </div>

            <!-- Comic Book -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('comic-book', 'Comic Book', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Crect fill%3D%27%236b46c1%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Cpath d%3D%27M50 100 L100 50 L150 100 L100 150 Z%27 fill%3D%27%23ff1493%27 stroke%3D%27%23000%27 stroke-width%3D%274%27%2F%3E%3Ctext x%3D%27100%27 y%3D%27105%27 font-size%3D%2724%27 font-weight%3D%27bold%27 text-anchor%3D%27middle%27 fill%3D%27%23000%27%3EPOW!%3C%2Ftext%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-purple-500 dark:bg-purple-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%236b46c1' width='200' height='200'/%3E%3Cpath d='M50 100 L100 50 L150 100 L100 150 Z' fill='%23ff1493' stroke='%23000' stroke-width='4'/%3E%3Ctext x='100' y='105' font-size='24' font-weight='bold' text-anchor='middle' fill='%23000'%3EPOW!%3C/text%3E%3C/svg%3E"
                  alt="Comic Book" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Comic Book</p>
            </div>

            <!-- Black & White -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('black-white', 'Black &amp; White', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Crect fill%3D%27%23222%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Crect x%3D%2760%27 y%3D%2760%27 width%3D%2780%27 height%3D%2780%27 fill%3D%27%23ddd%27%2F%3E%3Crect x%3D%2770%27 y%3D%2770%27 width%3D%2760%27 height%3D%2760%27 fill%3D%27%23555%27%2F%3E%3Crect x%3D%2775%27 y%3D%2795%27 width%3D%2750%27 height%3D%2735%27 fill%3D%27%23999%27%2F%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-gray-800 dark:bg-gray-900 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23222' width='200' height='200'/%3E%3Crect x='60' y='60' width='80' height='80' fill='%23ddd'/%3E%3Crect x='70' y='70' width='60' height='60' fill='%23555'/%3E%3Crect x='75' y='95' width='50' height='35' fill='%23999'/%3E%3C/svg%3E"
                  alt="Black &amp; White" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Black &amp; White</p>
            </div>

            <!-- Low Poly -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('low-poly', 'Low Poly', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Crect fill%3D%27%235ebeaa%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Cpolygon points%3D%27100,30 140,80 100,130 60,80%27 fill%3D%27%23fff%27%2F%3E%3Cpolygon points%3D%27100,30 100,80 60,80%27 fill%3D%27%23d0d0d0%27%2F%3E%3Cpolygon points%3D%27100,80 140,80 100,130%27 fill%3D%27%23a0a0a0%27%2F%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-teal-300 dark:bg-teal-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%235ebeaa' width='200' height='200'/%3E%3Cpolygon points='100,30 140,80 100,130 60,80' fill='%23fff'/%3E%3Cpolygon points='100,30 100,80 60,80' fill='%23d0d0d0'/%3E%3Cpolygon points='100,80 140,80 100,130' fill='%23a0a0a0'/%3E%3C/svg%3E"
                  alt="Low Poly" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Low Poly</p>
            </div>

            <!-- Pixel Art -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('pixel-art', 'Pixel Art', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Crect fill%3D%27%2366cccc%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Crect x%3D%2780%27 y%3D%2770%27 width%3D%2710%27 height%3D%2710%27 fill%3D%27%23fff%27%2F%3E%3Crect x%3D%2790%27 y%3D%2770%27 width%3D%2710%27 height%3D%2710%27 fill%3D%27%23fff%27%2F%3E%3Crect x%3D%27100%27 y%3D%2770%27 width%3D%2710%27 height%3D%2710%27 fill%3D%27%23fff%27%2F%3E%3Crect x%3D%27110%27 y%3D%2770%27 width%3D%2710%27 height%3D%2710%27 fill%3D%27%23fff%27%2F%3E%3Crect x%3D%2780%27 y%3D%2780%27 width%3D%2740%27 height%3D%2740%27 fill%3D%27%23fff%27%2F%3E%3Crect x%3D%2790%27 y%3D%2790%27 width%3D%277%27 height%3D%277%27 fill%3D%27%23000%27%2F%3E%3Crect x%3D%27103%27 y%3D%2790%27 width%3D%277%27 height%3D%277%27 fill%3D%27%23000%27%2F%3E%3Crect x%3D%2790%27 y%3D%27105%27 width%3D%2720%27 height%3D%275%27 fill%3D%27%23f00%27%2F%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-teal-400 dark:bg-teal-600 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%2366cccc' width='200' height='200'/%3E%3Crect x='80' y='70' width='10' height='10' fill='%23fff'/%3E%3Crect x='90' y='70' width='10' height='10' fill='%23fff'/%3E%3Crect x='100' y='70' width='10' height='10' fill='%23fff'/%3E%3Crect x='110' y='70' width='10' height='10' fill='%23fff'/%3E%3Crect x='80' y='80' width='40' height='40' fill='%23fff'/%3E%3Crect x='90' y='90' width='7' height='7' fill='%23000'/%3E%3Crect x='103' y='90' width='7' height='7' fill='%23000'/%3E%3Crect x='90' y='105' width='20' height='5' fill='%23f00'/%3E%3C/svg%3E"
                  alt="Pixel Art" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Pixel Art</p>
            </div>

            <!-- Anime -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('anime', 'Anime', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Crect fill%3D%27%2393c5fd%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Cellipse cx%3D%27100%27 cy%3D%2790%27 rx%3D%2740%27 ry%3D%2745%27 fill%3D%27%23ffd7b5%27%2F%3E%3Cellipse cx%3D%2785%27 cy%3D%2780%27 rx%3D%278%27 ry%3D%2712%27 fill%3D%27%231a1a1a%27%2F%3E%3Cellipse cx%3D%27115%27 cy%3D%2780%27 rx%3D%278%27 ry%3D%2712%27 fill%3D%27%231a1a1a%27%2F%3E%3Cellipse cx%3D%2787%27 cy%3D%2778%27 rx%3D%273%27 ry%3D%275%27 fill%3D%27%23fff%27%2F%3E%3Cellipse cx%3D%27117%27 cy%3D%2778%27 rx%3D%273%27 ry%3D%275%27 fill%3D%27%23fff%27%2F%3E%3Cpath d%3D%27M85 100 Q100 105 115 100%27 stroke%3D%27%23ff69b4%27 stroke-width%3D%272%27 fill%3D%27none%27%2F%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-blue-200 dark:bg-blue-800 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%2393c5fd' width='200' height='200'/%3E%3Cellipse cx='100' cy='90' rx='40' ry='45' fill='%23ffd7b5'/%3E%3Cellipse cx='85' cy='80' rx='8' ry='12' fill='%231a1a1a'/%3E%3Cellipse cx='115' cy='80' rx='8' ry='12' fill='%231a1a1a'/%3E%3Cellipse cx='87' cy='78' rx='3' ry='5' fill='%23fff'/%3E%3Cellipse cx='117' cy='78' rx='3' ry='5' fill='%23fff'/%3E%3Cpath d='M85 100 Q100 105 115 100' stroke='%23ff69b4' stroke-width='2' fill='none'/%3E%3C/svg%3E"
                  alt="Anime" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Anime</p>
            </div>

            <!-- Stick Style (COLORED) -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('stick-style', 'Stick Style', 'data:image/svg+xml,%3Csvg xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27 width%3D%27200%27 height%3D%27200%27%3E%3Crect fill%3D%27%2387ceeb%27 width%3D%27200%27 height%3D%27200%27%2F%3E%3Ccircle cx%3D%27100%27 cy%3D%2770%27 r%3D%2715%27 fill%3D%27%23ffd7b5%27 stroke%3D%27%23000%27 stroke-width%3D%272%27%2F%3E%3Ccircle cx%3D%2795%27 cy%3D%2768%27 r%3D%272%27 fill%3D%27%23000%27%2F%3E%3Ccircle cx%3D%27105%27 cy%3D%2768%27 r%3D%272%27 fill%3D%27%23000%27%2F%3E%3Cpath d%3D%27M95 75 Q100 78 105 75%27 stroke%3D%27%23000%27 stroke-width%3D%272%27 fill%3D%27none%27%2F%3E%3Cline x1%3D%27100%27 y1%3D%2785%27 x2%3D%27100%27 y2%3D%27125%27 stroke%3D%27%23ff6b6b%27 stroke-width%3D%273%27%2F%3E%3Cline x1%3D%27100%27 y1%3D%2795%27 x2%3D%2780%27 y2%3D%27110%27 stroke%3D%27%234ecdc4%27 stroke-width%3D%273%27%2F%3E%3Cline x1%3D%27100%27 y1%3D%2795%27 x2%3D%27120%27 y2%3D%27110%27 stroke%3D%27%234ecdc4%27 stroke-width%3D%273%27%2F%3E%3Cline x1%3D%27100%27 y1%3D%27125%27 x2%3D%2785%27 y2%3D%27145%27 stroke%3D%27%23ffe66d%27 stroke-width%3D%273%27%2F%3E%3Cline x1%3D%27100%27 y1%3D%27125%27 x2%3D%27115%27 y2%3D%27145%27 stroke%3D%27%23ffe66d%27 stroke-width%3D%273%27%2F%3E%3C%2Fsvg%3E', event)">
              <div
                class="aspect-square bg-sky-100 dark:bg-sky-800 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%2387ceeb' width='200' height='200'/%3E%3Ccircle cx='100' cy='70' r='15' fill='%23ffd7b5' stroke='%23000' stroke-width='2'/%3E%3Ccircle cx='95' cy='68' r='2' fill='%23000'/%3E%3Ccircle cx='105' cy='68' r='2' fill='%23000'/%3E%3Cpath d='M95 75 Q100 78 105 75' stroke='%23000' stroke-width='2' fill='none'/%3E%3Cline x1='100' y1='85' x2='100' y2='125' stroke='%23ff6b6b' stroke-width='3'/%3E%3Cline x1='100' y1='95' x2='80' y2='110' stroke='%234ecdc4' stroke-width='3'/%3E%3Cline x1='100' y1='95' x2='120' y2='110' stroke='%234ecdc4' stroke-width='3'/%3E%3Cline x1='100' y1='125' x2='85' y2='145' stroke='%23ffe66d' stroke-width='3'/%3E%3Cline x1='100' y1='125' x2='115' y2='145' stroke='%23ffe66d' stroke-width='3'/%3E%3C/svg%3E"
                  alt="Stick Style" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Stick Style</p>
            </div>


            <!-- Naruto Anime -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('naruto-anime', 'Naruto Anime', 'data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27200%27 height=%27200%27%3E%3Crect fill=%27%23ff8c00%27 width=%27200%27 height=%27200%27/%3E%3Cellipse cx=%27100%27 cy=%2790%27 rx=%2740%27 ry=%2745%27 fill=%27%23ffd7b5%27/%3E%3Cpath d=%27M60 70 Q100 60 140 70%27 fill=%27%23ffb347%27/%3E%3Cellipse cx=%2785%27 cy=%2785%27 rx=%278%27 ry=%2712%27 fill=%27%2300bfff%27/%3E%3Cellipse cx=%27115%27 cy=%2785%27 rx=%278%27 ry=%2712%27 fill=%27%2300bfff%27/%3E%3Cpath d=%27M80 105 Q100 115 120 105%27 stroke=%27%23000%27 stroke-width=%272%27 fill=%27none%27/%3E%3C/svg%3E', event)">
              <div
                class="aspect-square bg-orange-400 dark:bg-orange-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23ff8c00' width='200' height='200'/%3E%3Cellipse cx='100' cy='90' rx='40' ry='45' fill='%23ffd7b5'/%3E%3Cpath d='M60 70 Q100 60 140 70' fill='%23ffb347'/%3E%3Cellipse cx='85' cy='85' rx='8' ry='12' fill='%2300bfff'/%3E%3Cellipse cx='115' cy='85' rx='8' ry='12' fill='%2300bfff'/%3E%3Cpath d='M80 105 Q100 115 120 105' stroke='%23000' stroke-width='2' fill='none'/%3E%3C/svg%3E"
                  alt="Naruto Anime" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Naruto Anime</p>
            </div>

            <!-- Game of Thrones -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('game-of-thrones', 'Game of Thrones', 'data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27200%27 height=%27200%27%3E%3Crect fill=%27%232c2c2c%27 width=%27200%27 height=%27200%27/%3E%3Cpath d=%27M100 40 L120 80 L100 75 L80 80 Z%27 fill=%27%23c9a961%27/%3E%3Crect x=%2785%27 y=%2780%27 width=%2730%27 height=%2750%27 fill=%27%238b4513%27/%3E%3Crect x=%2795%27 y=%2790%27 width=%2710%27 height=%2740%27 fill=%27%23c9a961%27/%3E%3C/svg%3E', event)">
              <div
                class="aspect-square bg-gray-800 dark:bg-gray-900 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%232c2c2c' width='200' height='200'/%3E%3Cpath d='M100 40 L120 80 L100 75 L80 80 Z' fill='%23c9a961'/%3E%3Crect x='85' y='80' width='30' height='50' fill='%238b4513'/%3E%3Crect x='95' y='90' width='10' height='40' fill='%23c9a961'/%3E%3C/svg%3E"
                  alt="Game of Thrones" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Game of Thrones</p>
            </div>

          </div>

          <!-- Page Navigation -->
          <div class="flex items-center justify-center gap-3 mb-6">
            <button id="prevPageBtn" onclick="previousStylePage()"
              class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              disabled>
              â† Previous
            </button>
            <span class="text-sm text-gray-600 dark:text-gray-400">
              Page <span id="currentPage">1</span> of 3
            </span>
            <button id="nextPageBtn" onclick="nextStylePage()"
              class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
              Next â†’
            </button>
          </div>

          <!-- Styles Grid - Page 2 -->
          <div id="stylesPage2" class="hidden grid-cols-2 md:grid-cols-5 gap-4 mb-6">

            <!-- Pixar Artstyle -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('pixar-artstyle', 'Pixar Artstyle', undefined, event)">
              <div
                class="aspect-square bg-sky-200 dark:bg-sky-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%2387ceeb' width='200' height='200'/%3E%3Ccircle cx='100' cy='90' r='40' fill='%23ffd7b5'/%3E%3C/svg%3E"
                  alt="Pixar" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Pixar Artstyle</p>
            </div>

            <!-- Pop Art -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('pop-art', 'Pop Art', undefined, event)">
              <div
                class="aspect-square bg-pink-400 dark:bg-pink-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23ff69b4' width='200' height='200'/%3E%3Ccircle cx='100' cy='100' r='40' fill='%23ffff00' stroke='%23000' stroke-width='4'/%3E%3C/svg%3E"
                  alt="Pop Art" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Pop Art</p>
            </div>

            <!-- Digital Art -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('digital-art', 'Digital Art', undefined, event)">
              <div
                class="aspect-square bg-cyan-600 dark:bg-cyan-800 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%230891b2' width='200' height='200'/%3E%3Ccircle cx='100' cy='100' r='50' fill='%23f0f9ff' opacity='0.6'/%3E%3C/svg%3E"
                  alt="Digital Art" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Digital Art</p>
            </div>

            <!-- C4D Cartoon -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('c4d-cartoon', 'C4D Cartoon', undefined, event)">
              <div
                class="aspect-square bg-pink-300 dark:bg-pink-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23fbbf24' width='200' height='200'/%3E%3Crect x='70' y='70' width='60' height='60' fill='%23ef4444' rx='10'/%3E%3C/svg%3E"
                  alt="C4D Cartoon" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">C4D Cartoon</p>
            </div>

            <!-- Watercolor -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('watercolor', 'Watercolor', undefined, event)">
              <div
                class="aspect-square bg-blue-100 dark:bg-blue-900 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23dbeafe' width='200' height='200'/%3E%3Ccircle cx='100' cy='100' r='50' fill='%236b7280' opacity='0.3'/%3E%3C/svg%3E"
                  alt="Watercolor" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Watercolor</p>
            </div>

            <!-- 90s Nostalgia -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('90s-nostalgia', '90s Nostalgia', undefined, event)">
              <div
                class="aspect-square bg-orange-200 dark:bg-orange-800 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23fed7aa' width='200' height='200'/%3E%3Crect x='50' y='80' width='100' height='40' fill='%23dc2626'/%3E%3C/svg%3E"
                  alt="90s Nostalgia" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">90s Nostalgia</p>
            </div>

            <!-- Analog Nostalgia -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('analog-nostalgia', 'Analog Nostalgia', undefined, event)">
              <div
                class="aspect-square bg-slate-700 dark:bg-slate-900 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23334155' width='200' height='200'/%3E%3Crect x='60' y='60' width='80' height='80' fill='%2394a3b8'/%3E%3C/svg%3E"
                  alt="Analog Nostalgia" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Analog Nostalgia</p>
            </div>

            <!-- Children's Book -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('childrens-book', 'Children\'s Book', event)">
              <div
                class="aspect-square bg-yellow-200 dark:bg-yellow-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23fef08a' width='200' height='200'/%3E%3Ccircle cx='100' cy='100' r='40' fill='%23f97316'/%3E%3C/svg%3E"
                  alt="Children's Book" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Children's Book</p>
            </div>

            <!-- Expired Film -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('expired-film', 'Expired Film', undefined, event)">
              <div
                class="aspect-square bg-amber-900 dark:bg-amber-950 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23451a03' width='200' height='200'/%3E%3Crect x='70' y='70' width='60' height='60' fill='%23d97706' opacity='0.5'/%3E%3C/svg%3E"
                  alt="Expired Film" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Expired Film</p>
            </div>

            <!-- Flat Art -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('flat-art', 'Flat Art', undefined, event)">
              <div
                class="aspect-square bg-emerald-500 dark:bg-emerald-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%2310b981' width='200' height='200'/%3E%3Crect x='60' y='60' width='80' height='80' fill='%23fbbf24'/%3E%3C/svg%3E"
                  alt="Flat Art" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Flat Art</p>
            </div>

          </div>

          <!-- Styles Grid - Page 3 -->
          <div id="stylesPage3" class="hidden grid-cols-2 md:grid-cols-5 gap-4 mb-6">

            <!-- Flat Vector -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('flat-vector', 'Flat Vector', undefined, event)">
              <div
                class="aspect-square bg-blue-500 dark:bg-blue-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%233b82f6' width='200' height='200'/%3E%3Crect x='50' y='80' width='40' height='60' fill='%23fbbf24'/%3E%3C/svg%3E"
                  alt="Flat Vector" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Flat Vector</p>
            </div>

            <!-- High Contrast -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('high-contrast', 'High Contrast', undefined, event)">
              <div
                class="aspect-square bg-black dark:bg-gray-950 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23000' width='200' height='200'/%3E%3Crect x='80' y='80' width='40' height='40' fill='%23fff'/%3E%3C/svg%3E"
                  alt="High Contrast" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">High Contrast</p>
            </div>

            <!-- Old Cartoons -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('old-cartoons', 'Old Cartoons', undefined, event)">
              <div
                class="aspect-square bg-teal-300 dark:bg-teal-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%235ebeaa' width='200' height='200'/%3E%3Ccircle cx='100' cy='100' r='40' fill='%23f59e0b'/%3E%3C/svg%3E"
                  alt="Old Cartoons" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Old Cartoons</p>
            </div>

            <!-- Paint Gesture -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('paint-gesture', 'Paint Gesture', undefined, event)">
              <div
                class="aspect-square bg-rose-200 dark:bg-rose-800 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23fecaca' width='200' height='200'/%3E%3Cpath d='M50 100 Q100 50 150 100' stroke='%23ef4444' stroke-width='8' fill='none'/%3E%3C/svg%3E"
                  alt="Paint Gesture" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Paint Gesture</p>
            </div>

            <!-- Halftone Print -->
            <div class="style-card cursor-pointer group"
              onclick="selectImageStyle('halftone-print', 'Halftone Print', undefined, event)">
              <div
                class="aspect-square bg-gray-300 dark:bg-gray-700 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-[#5B7FFF] transition-all">
                <img
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Crect fill='%23d1d5db' width='200' height='200'/%3E%3Ccircle cx='80' cy='80' r='10' fill='%23000'/%3E%3Ccircle cx='120' cy='80' r='10' fill='%23000'/%3E%3Ccircle cx='80' cy='120' r='10' fill='%23000'/%3E%3Ccircle cx='120' cy='120' r='10' fill='%23000'/%3E%3C/svg%3E"
                  alt="Halftone Print" class="w-full h-full object-cover">
              </div>
              <p class="text-center mt-2 font-medium text-sm text-gray-900 dark:text-gray-100">Halftone Print</p>
            </div>

          </div>

        </div>
      </div>

      <!-- Generated Media Modal -->
      <div id="generatedMediaModal"
        class="fixed inset-0 z-50 hidden bg-black/50 dark:bg-black/70 flex items-center justify-center transition-opacity duration-300 p-4">
        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700
              w-full max-w-3xl max-h-[85vh] overflow-hidden flex flex-col
              text-gray-900 dark:text-gray-100 transition-all duration-300">

          <!-- Header -->
          <div
            class="flex items-center justify-between px-5 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">
            <button onclick="closeGeneratedMediaModal()"
              class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors text-sm font-medium">
              â† Back to Settings
            </button>
            <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">Generated Media</h2>
            <button onclick="closeGeneratedMediaModal()"
              class="text-2xl text-gray-400 hover:text-red-600 dark:hover:text-red-500 transition-colors leading-none">&times;</button>
          </div>

          <!-- Scrollable Content -->
          <div class="flex-1 overflow-y-auto p-5" id="generatedScenesContainer">
            <!-- Scenes will be dynamically added here -->
            <div id="scenesLoading" class="flex items-center justify-center py-20">
              <div class="text-center">
                <div
                  class="inline-block w-12 h-12 border-4 border-[#5B7FFF] border-t-transparent rounded-full animate-spin mb-4">
                </div>
                <p class="text-gray-600 dark:text-gray-400">Generating images...</p>
                <p class="text-sm text-gray-500 dark:text-gray-500 mt-2">This may take a few minutes</p>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="flex gap-3 px-5 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">
            <button id="downloadAllMediaBtn" onclick="downloadAllMedia()" class="flex-1 px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-700
                     text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 
                     transition-colors font-medium flex items-center justify-center gap-2 text-sm">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" />
              </svg>
              Download All Media
            </button>

            <!-- ðŸŽ¬ TRANSITION SETTINGS BUTTON -->
            <button onclick="openTransitionSettings()" class="px-5 py-2.5 rounded-lg bg-purple-600 hover:bg-purple-700
                     text-white font-medium transition-colors flex items-center justify-center gap-2 text-sm">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
              </svg>
              Transitions
            </button>

            <button id="renderVideosBtn" onclick="renderVideos()" class="flex-1 px-4 py-2.5 rounded-lg bg-[#5B7FFF] hover:bg-[#4A6BFF]
                     text-white font-medium transition-colors flex items-center justify-center gap-2 text-sm">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
              Render Videos
            </button>
          </div>

          <!-- Bottom Actions -->
          <div class="flex gap-3 px-5 py-3 bg-white dark:bg-gray-900">
            <button onclick="restartGeneration()" class="flex-1 px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-700
                     text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 
                     transition-colors font-medium flex items-center justify-center gap-2 text-sm">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8"></path>
                <path d="M21 3v5h-5"></path>
                <path d="M21 12a9 9 0 01-9 9 9.75 9.75 0 01-6.74-2.74L3 16"></path>
                <path d="M3 21v-5h5"></path>
              </svg>
              Restart
            </button>
            <button onclick="closeGeneratedMediaModal()" class="flex-1 px-4 py-2.5 rounded-lg bg-[#5B7FFF] hover:bg-[#4A6BFF]
                     text-white font-medium transition-colors text-sm">
              Close
            </button>
          </div>
        </div>
      </div>
  </section>

  <!-- Feature Highlights Section -->
  <section class="feature-highlights py-20 md:py-32 bg-gray-50 dark:bg-gray-800/50">
    <div class="container mx-auto px-4 max-w-6xl">
      <h2 class="section-title text-center mb-12 animate-on-load">Powerful AI Features</h2>

      <div class="feature-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <!-- Feature 1: AI Script Generation -->
        <div class="feature-card animate-on-load-delay-1">
          <div class="feature-icon feature-icon-script">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
            <div class="sparkle"></div>
          </div>
          <h3 class="feature-title">AI Script Generation</h3>
          <p class="feature-description">AI-powered scripts optimized for engagement and retention</p>
          <div class="feature-visual feature-visual-script"></div>
        </div>

        <!-- Feature 2: AI Image Generation -->
        <div class="feature-card animate-on-load-delay-2">
          <div class="feature-icon feature-icon-image">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <div class="magic-wand"></div>
          </div>
          <h3 class="feature-title">AI Image Generation</h3>
          <p class="feature-description">Generate stunning visuals for every scene automatically</p>
          <div class="feature-visual feature-visual-image"></div>
        </div>

        <!-- Feature 3: AI Voice Narration -->
        <div class="feature-card animate-on-load-delay-3">
          <div class="feature-icon feature-icon-voice">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
            </svg>
            <div class="audio-waves"></div>
          </div>
          <h3 class="feature-title">AI Voice Narration</h3>
          <p class="feature-description">Natural-sounding voiceovers in multiple styles and languages</p>
          <div class="feature-visual feature-visual-voice"></div>
        </div>

        <!-- Feature 4: One-Click Rendering -->
        <div class="feature-card animate-on-load-delay-3">
          <div class="feature-icon feature-icon-video">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
            </svg>
          </div>
          <h3 class="feature-title">One-Click Rendering</h3>
          <p class="feature-description">Export YouTube-ready videos instantly with transitions</p>
          <div class="feature-visual feature-visual-video"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section class="how-it-works py-20 md:py-32 bg-white dark:bg-gray-900">
    <div class="container mx-auto px-4 max-w-6xl">
      <h2 class="section-title text-center mb-16 animate-on-load">How StoryVid AI Works</h2>

      <div class="workflow-timeline">
        <!-- Step 1 -->
        <div class="workflow-step-card animate-on-load-delay-1">
          <div class="step-badge step-badge-1">1</div>
          <div class="step-icon step-icon-1">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
            </svg>
          </div>
          <h3 class="step-title">Enter Title</h3>
          <p class="step-description">Simply type your video idea or title. Our AI will understand your concept and
            create a compelling script.</p>
          <div class="step-visual step-visual-1"></div>
        </div>

        <!-- Connector -->
        <div class="timeline-connector"></div>

        <!-- Step 2 -->
        <div class="workflow-step-card animate-on-load-delay-2">
          <div class="step-badge step-badge-2">2</div>
          <div class="step-icon step-icon-2">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
          </div>
          <h3 class="step-title">AI Generates Script</h3>
          <p class="step-description">Our advanced AI creates an engaging, retention-optimized script tailored to your
            title and style preferences.</p>
          <div class="step-visual step-visual-2"></div>
        </div>

        <!-- Connector -->
        <div class="timeline-connector"></div>

        <!-- Step 3 -->
        <div class="workflow-step-card animate-on-load-delay-3">
          <div class="step-badge step-badge-3">3</div>
          <div class="step-icon step-icon-3">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
          </div>
          <h3 class="step-title">Add Media</h3>
          <p class="step-description">Generate AI images for each scene and add professional voice narration. Customize
            styles and voices to match your brand.</p>
          <div class="step-visual step-visual-3"></div>
        </div>

        <!-- Connector -->
        <div class="timeline-connector"></div>

        <!-- Step 4 -->
        <div class="workflow-step-card animate-on-load-delay-3">
          <div class="step-badge step-badge-4">4</div>
          <div class="step-icon step-icon-4">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
            </svg>
          </div>
          <h3 class="step-title">Download/Upload</h3>
          <p class="step-description">Render your video with smooth transitions, then download it or upload directly to
            YouTube with one click.</p>
          <div class="step-visual step-visual-4"></div>
        </div>
      </div>
    </div>
  </section>

  <footer class="bg-gray-100 dark:bg-gray-800 py-8 mt-12 transition-colors duration-300">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-4 md:mb-0">
          <a href="#" class="flex items-center gap-2">
            <span class="text-xl">ðŸ“˜</span>
            <span class="font-heading font-bold text-gray-800 dark:text-gray-200">StoryVid AI</span>
          </a>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Transform your ideas into engaging videos</p>
        </div>
        <div class="flex gap-6">
          <a href="#"
            class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">Terms</a>
          <a href="#"
            class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">Privacy</a>
          <a href="#"
            class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">Contact</a>
        </div>
      </div>
      <div class="text-center text-sm text-gray-500 dark:text-gray-400 mt-6">
        &copy; 2023 StoryVid AI. All rights reserved.
      </div>
    </div>
  </footer>

  <!-- Style Modal -->
  <div id="styleModal"
    class="fixed inset-0 z-50 hidden bg-black/50 dark:bg-black/70 flex items-center justify-center transition-opacity duration-300">
    <div class="bg-white dark:bg-gray-900 rounded-[24px] shadow-2xl border border-gray-200 dark:border-gray-700
           modal-panel relative w-[800px] max-w-[95vw] h-[80vh] max-h-[80vh] flex flex-col
           overflow-hidden text-gray-900 dark:text-gray-100 transition-all duration-300">
      <div class="sticky top-0 z-10 flex gap-7 px-8 pt-5 pb-1 border-b border-gray-200 dark:border-gray-700
             bg-gray-50 dark:bg-gray-800 font-semibold rounded-t-[24px]">
        <span id="tabCreateStyle" onclick="showCreateStyle()"
          class="active cursor-pointer text-gray-900 dark:text-gray-100 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">Create
          Style</span>
        <span id="tabStyleList" onclick="showStyleList()"
          class="cursor-pointer text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">Style
          List</span>
      </div>
      <div id="styleBody" class="flex-1 overflow-y-auto px-8 py-5">
        <div id="createStyleView"></div>
        <div id="styleListView" class="hidden"></div>
      </div>
      <button onclick="closeStyleModal()"
        class="absolute top-2 right-4 text-2xl text-gray-400 hover:text-red-600 dark:hover:text-red-500 transition-colors">&times;</button>
    </div>
  </div>

  <!-- Regenerate Image Modal -->
  <div id="regenerateModal"
    class="fixed inset-0 z-50 hidden bg-black/50 dark:bg-black/70 flex items-center justify-center transition-opacity duration-300">
    <div
      class="bg-white dark:bg-gray-900 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-[600px] max-w-[95vw] p-6 transition-all duration-300">
      <h2 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Regenerate Image</h2>
      <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">You can modify the prompt below to regenerate this image
        with your desired changes.</p>

      <div class="mb-4">
        <label class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 block">Image Prompt</label>
        <textarea id="regeneratePromptInput" class="w-full h-32 p-3 border border-gray-300 dark:border-gray-600 rounded-lg
                       bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                       focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300"
          placeholder="Enter your prompt here..."></textarea>
      </div>

      <div class="text-sm text-gray-500 dark:text-gray-400 mb-4">
        <strong>Estimated Credits:</strong> 30
      </div>

      <div class="flex gap-3 justify-end">
        <button onclick="closeRegenerateModal()" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg
                     text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
          Cancel
        </button>
        <button id="confirmRegenerateBtn" onclick="confirmRegenerate()"
          class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-semibold">
          Regenerate
        </button>
      </div>
    </div>
  </div>

  <!-- Fallback: Enable Generate button when title is typed (works immediately) -->
  <script>
      (function () {
        function setupGenerateButton() {
          const titleInput = document.getElementById('video-title');
          const generateBtn = document.getElementById('generate-btn');

          if (!titleInput || !generateBtn) {
            setTimeout(setupGenerateButton, 100);
            return;
          }

          function updateButton() {
            const hasValue = titleInput.value.trim() !== '';
            generateBtn.disabled = !hasValue;
            if (hasValue) {
              console.log('âœ… [FALLBACK] Generate button enabled');
              // Add smooth scale animation when enabled
              generateBtn.style.transform = 'scale(1.02)';
              setTimeout(() => {
                generateBtn.style.transform = 'scale(1)';
              }, 200);
            }
          }

          titleInput.addEventListener('input', updateButton);
          titleInput.addEventListener('keyup', updateButton);
          titleInput.addEventListener('paste', () => setTimeout(updateButton, 10));

          // Add focus/blur animations
          const inputWrapper = titleInput.closest('.input-wrapper');
          const container = titleInput.closest('.container');
          const inputContainer = titleInput.closest('.input-container');

          titleInput.addEventListener('focus', () => {
            if (inputWrapper) inputWrapper.classList.add('input-focused');
            if (container) container.classList.add('input-focused');
            if (inputContainer) inputContainer.classList.add('input-focused');
          });

          titleInput.addEventListener('blur', () => {
            if (inputWrapper) inputWrapper.classList.remove('input-focused');
            if (container) container.classList.remove('input-focused');
            if (inputContainer) inputContainer.classList.remove('input-focused');
          });

          updateButton(); // Check initial state

          console.log('âœ… [FALLBACK] Generate button handler attached');
        }

        // Mark animation classes as complete after animations finish
        function markAnimationsComplete() {
          setTimeout(() => {
            const animatedElements = document.querySelectorAll('.animate-on-load, .animate-slide-up, .animate-scale-up');
            animatedElements.forEach(el => {
              el.classList.add('animation-complete');
            });
          }, 2000);
        }

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => {
            setupGenerateButton();
            markAnimationsComplete();
          });
        } else {
          setupGenerateButton();
          markAnimationsComplete();
        }
      })();
  </script>

  <!-- New modular app (Vite) - Load FIRST -->
  <script type="module" src="/src/app.js"></script>
  <!-- Legacy app.js for backward compatibility during migration - Load AFTER new code -->
  <script>
    // Wait for new code to load, then load legacy app.js
    window.addEventListener('load', () => {
      setTimeout(() => {
        if (typeof window.legacyAppNeeded === 'undefined') {
          const script = document.createElement('script');
          script.src = '/app.js';
          script.onerror = () => {
            console.log('Legacy app.js not found, using new modular structure');
          };
          document.body.appendChild(script);
        }
      }, 100);
    });
  </script>
</body>

</html>